# coding=utf-8

import numpy as np
import matplotlib.pyplot as plt
import pylab as pl

plt.rcParams['font.sans-serif'] = ['Arial']  # 如果要显示中文字体,则在此处设为：SimHei
plt.rcParams['axes.unicode_minus'] = False  # 显示负号
plt.rcParams['xtick.bottom'] = False

#顺序128B
F128=[99,100,100,100,100,100,100,100,100,100,99.01,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,99.01,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,99.02,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100]
B128=[1.51,7.415,7.94,7.96,5.5,6.99,8.88,5.995,8.17,7.01,4.95,6.535,5.04,5.04,4.56,5.88,3.125,5.48,5.93,6.395,6.375,1.615,4.95,4.5,4,4.995,4.105,5.595,7.04,6.555,3.06,5.445,3.62,4.04,5.99,3.61,5.02,4.995,4.5,4.995,5.535,5.48,5.98,4.54,6.03,4.065,3.57,5,7.1,7.49,6.405,3.62,3.57,5.825,4.535,4.525,5.495,4.59,4.995,4.065,4.58,4.5,5.93,4.04,4.545,4.995,4.11,5.39,4.535,4.535,5.525,5.56,6.11,6.435,1.615,3.57,3.61,5,4.95,3.095,4.545,5.835,5.39,4.545,3.095,4.535,4.08,4.04,4.535,5,5.005,6.93,5.04,6.5,4.125,4.065,5.06,4.535,4.04,4.955]
#随机128B
# F128=[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,99.01,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,99,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100]
# B128=[5.5,1.485,0,0,6.565,7.425,0,7,16.5,22.665,7,7,3.5,3.96,30.425,51.13,2.99,7,6.565,0,43.345,41.145,4,2.525,7.425,14.855,44.175,51.715,22.865,0,7.425,23.345,46,50.865,43.075,0.99,5.61,28.02,48.06,48,48.08,5,2,29.07,50.565,44.1,50.935,9.67,0.495,32.815,51.86,44.19,51.895,38.755,0,39.11,52.14,44.255,51.42,51.915,17.82,41.715,52.675,43.435,50.93,29.13,0,41,51.545,43.935,51.98,19.625,0,43,52.23,43.365,51.565,51.2,24.715,44.2,52.62,44.835,52.12,46.19,0.99,44.62,51.635,44,50.865,51.135,10.985,44.385,51.355,44.12,51.98,52.69,44.06,51.915,51.86,44.44]
# #顺序1KB
# F128=[92.71,100,100,100,100,100,100,100,100,100,100,99,100,100,100,100,100,99.02,100,100,100,100,100,100,99.02,100,100,100,100,99,100,100,100,100,99.01,100,100,100,100,99.01,100,100,100,99,100,100,100,100,99.01,100,100,100,99,100,100,100,99,100,100,100,99.01,100,100,99.01,100,100,100,99.01,100,100,99,100,100,100,99.01,100,100,99.02,100,99.01,100,100,99,100,100,99.01,100,100,99.01,100,100,98.99,100,100,99,100,99.01,100,99.01,100]
# B128=[11.38,14.175,13.73,14.8,14.3,15.865,14.995,13.49,10.14,11.88,10.31,13.355,12.62,13.18,16.64,10.395,12.235,11.99,11.65,12.075,11.66,14.315,16.1,12.62,11.54,13.605,13.425,11.595,12.745,12.135,10.045,12.47,15.36,14.66,14.17,13.71,11.585,13.235,13.515,14.905,13.085,14.665,12.545,14.905,14.03,13.57,10.99,12.47,12.995,14.075,12.335,13.235,13.2,11.49,11.835,10.5,11.165,10.5,10,10.895,11,10.5,12.36,13.705,13.215,12.31,9.9,11.93,13.57,10.99,13.19,13.105,12.44,13.12,11.46,10.59,10.395,11.385,10.5,10.415,11.47,13.19,12.725,13.96,13.49,12.04,10.685,14.32,13.85,12.32,12,13.215,12.635,13.19,12.27,11.335,11.585,14.19,12.305,12.155]
# #随机1KB
# F128=[100,100,100,100,100,99.02,100,100,100,100,100,100,100,100,45.54,63.64,100,100,100,19.39,17.82,100,99,100,90,9.62,6.06,71,100,100,100,61,3.06,76.77,100,99.01,100,32.99,53,99.01,100,99.01,37,14.29,100,100,100,99.01,9.28,41.58,99,100,100,81.63,6.06,38.38,99,100,100,88.89,6.06,6.12,55.56,99,100,100,100,7.14,8,6.93,97.03,100,100,99.01,89.11,5.1,3.12,32,100,100,100,100,52.04,5.1,7,97,100,100,99.01,52,7.84,6.06,29.7,100,100,99,100,67.68,7,6,4.12,88,100,99.02,100,100,22,5.05,7,81.63]
# B128=[41.18,43.39,41.55,43.665,44.805,44.335,43.725,48.43,62.135,47.305,43.565,71.645,55.195,43.6,41.06,51.945,69.64,59.585,46.22,39.03,39.85,62.38,70.67,59,44.635,38.775,39,45.55,69.15,70.155,48.36,40.765,38.385,48.805,72.91,56.25,47.225,41.125,45.75,72.5,63,43.92,42.32,39.5,58.365,73.785,49.765,43.525,40.595,42.05,68.91,73.295,72.06,71.705,70.42,66.84,66.21,72.085,71.245,74.935,69.54,71.075,55.055,63.645,71.48,71.06,74.52,68.97,70.42,69.805,51.915,68.675,74.28,73.41,74.14,71.015,69.97,66.425,48.605,70.915,73.265,74.17,72.135,69.315,69.365,57.325,70.965,73.04,72.08,72.35,69.025,72.225,68.63,51.85,71.275,68.47,74.645,73.445,70.1,66.795,71.215,56.175,58.085,73.04,70.775,72.57,68.63,69.81,70.325,57.09]
# #4kb
#
# F128=[100,100,99.01,100,100,100,100,99.01,100,100,99,100,100,99.01,100,100,99.02,100,100,99.01,100,99.01,100,100,99.01,100,99,100,99,100,98.99,100,99.01,100,99,100,99.01,99,100,99,99.01,100,99,100,98.99,99.01,99,100,99,99.01,99,99,99.01,99,99.01,100,99.01,99,99,99,99,98.99,98.04,99,98.99,98.99,99.01,99,98.99,99.01,98.98,98.98,98.04,99,99.01,98.99,98.99,98.02,98.99,98.99,98,99,99,99,98,98.99,98.98,98.02,99,98.02,99,98,99.01,98,99,98.02,99,98,98.99,98.02]
# B128=[18.93,20.16,19.24,18.395,19.205,15.98,20.31,18.5,18.465,20.12,18.635,17.01,19.775,18.5,18.895,18.045,18.36,17.05,19.945,21.235,20.595,19.235,17.335,19.745,18.925,18.025,17.675,17.17,17.5,15.93,18.825,21.635,20.475,19.46,18.73,17.855,25.45,14.865,16.295,17.955,21.78,24.95,20.53,22.06,21.295,20.775,16.98,17.255,17.435,16.395,15.48,16.635,17.455,19.33,17.675,20.19,19.5,21.36,21.29,19.815,17.05,17.79,18.51,21.36,22.215,21.81,21.945,20.9,20.95,19.75,19.14,18.525,20.705,22.075,21.98,18.91,16.44,20.55,22.285,18.61,23.075,21.44,21.665,21.805,21.075,22.36,23.585,22.05,19.67,22.775,21,19.005,16.41,22.98,19.8,18.98,16.95,18.315,20.045,22.6]
# F128=[100,100,100,99.01,97.98,38.61,4.95,71,96,86.14,16.83,18.18,99.01,33,0,3.03,18,100,100,13.86,3.96,4,4.95,3.92,6,99.01,100,39,3.96,3.03,2.02,2.02,2,1.02,1.01,84.16,100,56.44,3,2.02,4,2.02,3.92,1.02,3,43.56,99.01,100,8.91,2.02,2.97,4.08,8.91,1.02,2.04,3.96,3.96,58,99.01,84,5.05,2.02,1.02,3.96,2.02,2.97,4,3,3,52.48,100,90.1,2,4.9,0,3.96,1.01,2.02,2.02,3,3.96,4.95,61,100,79.21,3.06,3.06,11.32,11.93,3.06,3.06,2.02,3.96,3,2.02,3.96,15,100,99,32]
# B128=[0,31.845,52.07,51.88,54.79,43.5,37,47.705,51.335,49.19,39.15,41.085,50.505,43.23,36.46,37.38,42.645,49.98,51.52,38.84,36.87,37.745,39.37,37,37.865,52,52.095,40.855,36.895,36.735,38.71,39.81,37.745,36.685,36.87,49.63,49.98,43.75,38.025,37.865,36.6,37.895,37.625,37,36.87,45.91,50.165,50.18,39.02,36.735,36.895,37.78,33.28,37.13,37.375,37.245,37.5,48.65,55.1,48.605,35.625,37.13,37,39.165,37.02,36.98,37.475,37.5,37.375,46.58,50.365,51.72,37.995,36.5,37.38,38.87,36.735,37.85,36.735,37.875,37.375,37.13,48.15,53.55,47.395,37.245,36.735,36.735,37.39,36.635,36.815,36.87,37.245,37.625,37,37.375,39.52,52.74,49.945,42.65]
#

colors = ["#DEDEDE", "#F3EBE3", "#E9BF6A", "#14B383", "#096A9D", "#482A0C"]

index = range(0, len(F128))

colors = ["#DEDEDE", "#F3EBE3", "#E9BF6A", "#14B383", "#096A9D", "#482A0C"]

bar_width = 0.30
fig, ax2 = plt.subplots(1, 1, figsize=(6, 2.5))
# plt.grid(linestyle=":")  # 设置背景网格线为虚线
gca = plt.gca()
gca.set_axisbelow(True)
gca.grid(axis='y', linestyle='dotted', lw=1, alpha=1)
gca.spines['top'].set_visible(False)  # 去掉上边框
gca.spines['right'].set_visible(False)  # 去掉右边框



# 设置图位置
plt.subplots_adjust(left=0.12)
plt.subplots_adjust(bottom=0.16)
plt.subplots_adjust(right=0.96)
plt.subplots_adjust(top=0.83)


line1 = ax2.plot(index, list(np.array(F128)/1), label='Foreground Thread', ls='-', linewidth = 3)
line2 = ax2.plot(index, list(np.array(B128)/1), label='Background Thread', ls='--', linewidth = 3)
# line3 = ax2.plot(index, list(np.array(F1k)/1), label='PM_W', ls='--', marker='x')
# line4 = ax2.plot(index, list(np.array(B1k)/1), label='PM_R', ls='--', marker='+')

plt.ylim(0, 115)
plt.xlim(0, 100)
# ax2.set_yscale("log")
# xlabels = ['A1','A2','B','C1','C2']
xlabels = range(0, 100 , 10)
xindex = range(0, 100, 10)
plt.xticks(xindex, xlabels, fontsize=13)
plt.yticks(range(0,125,25),range(0,125,25),fontsize=13)
plt.minorticks_off()


# plt.text(index[0], 1.33, SIB[0], size = 10)
# plt.text(index[1], 1.33, SIB[1], size = 10)
# plt.text(index[2], 1.33, SIB[2], size = 10)
# plt.text(index[3], 1.33, SIB[3], size = 10)
# plt.text(index[4], 1.33, SIB[4], size = 10)


# plt.legend(ncol=1, bbox_to_anchor=(1.00, 1.02), edgecolor='white', fontsize=8)
plt.legend(loc=1,ncol=2,fontsize=12,bbox_to_anchor=(1, 1.25),framealpha=0)
leg = ax2.get_legend()
ltext = leg.get_texts()
plt.setp(ltext, fontsize=14, fontweight='bold')  # 设置图例字体的大小和粗细
ax2.set_ylabel('Sequential Write\nCPU Utilization(%)', fontsize=15, fontweight='bold')
ax2.set_xlabel("Time(s)", fontsize=15, fontweight='bold')
ax2.tick_params(which='both', direction='in')  # 设置刻度
ax2.tick_params(which='major', length=4)
plt.tight_layout()
plt.savefig('./bg-cpu-128B-seq.pdf', format='pdf')
plt.show()
